/* Mobile Responsive Styles for General Stock Card */
@media screen and (max-width: 768px) {

    /* --- 1. General Container Adjustments --- */
    .app-container {
        padding: 10px;
    }

    /* --- 2. Header Adjustments --- */
    header {
        padding: 16px;
    }

    .header-content {
        flex-direction: column;
        align-items: center;
        text-align: center;
        gap: 16px;
    }

    .logo {
        flex-direction: column;
        gap: 8px;
    }

    /* Move 'Actions' (Add Item) to top or bottom? Let's keep it but make it full width */
    .actions.desktop-only {
        /* On mobile, we might want to hide 'Print' or 'Refresh' if space is tight, 
           but user asked for better proportions. Let's make buttons full width or grid. */
        display: grid;
        grid-template-columns: 1fr 1fr;
        /* 2 columns */
        gap: 10px;
        width: 100%;
    }

    .actions.desktop-only button {
        width: 100%;
        justify-content: center;
    }

    /* --- 3. Stats Grid --- */
    .dashboard-stats {
        display: grid;
        /* Add this! */
        grid-template-columns: 1fr 1fr;
        gap: 12px;
    }

    .stat-card {
        padding: 12px;
        /* Slightly smaller padding */
    }

    /* Optional: Make the Last Odd item span full width if we have 3 items? 
       User said "make yellow box smaller", so currently it was full width. 
       Now it will be half width. Perfect.
       If we have 3 items (Total, Low, Normal), the 3rd one will be on new row.
       Let's leave it as is, or make the IMPORTANT one full width? 
       User said "Yellow box smaller". So he wants it sharing space.
    */

    /* --- 4. Filtering Section --- */
    .filter-section {
        flex-direction: column;
        align-items: stretch;
    }

    .search-box {
        width: 100%;
    }

    .category-filters {
        display: flex;
        overflow-x: auto;
        padding-bottom: 8px;
        gap: 8px;
        -ms-overflow-style: none;
        scrollbar-width: none;
    }

    .category-filters::-webkit-scrollbar {
        display: none;
    }

    .filter-btn {
        flex: 0 0 auto;
        white-space: nowrap;
    }

    /* --- 5. Table to Compact Card View --- */
    table,
    thead,
    tbody,
    th,
    td,
    tr {
        display: block;
    }

    thead tr {
        position: absolute;
        top: -9999px;
        left: -9999px;
    }

    tr {
        margin-bottom: 12px;
        background: white;
        border-radius: 12px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        border: 1px solid var(--border-color);
        padding: 12px;
        display: grid;
        grid-template-columns: 1fr 1fr;
        grid-template-rows: auto auto auto;
        gap: 8px;
    }

    /* Row 1: Status + Name (span full width) */
    td:nth-child(1) {
        /* สถานะ - hide on mobile, show as badge instead */
        display: none;
    }

    td:nth-child(2) {
        /* ชื่อรายการ/สเปก - full width row 1 */
        grid-column: 1 / -1;
        border: none;
        padding: 0;
        text-align: left;
    }

    td:nth-child(2):before {
        display: none;
    }

    td:nth-child(3) {
        /* หมวดหมู่ - hide, shown in name row */
        display: none;
    }

    /* Row 2: Stock & Min - side by side */
    td:nth-child(4) {
        /* คงเหลือ */
        grid-column: 1;
        border: none;
        padding: 8px 0;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        text-align: left;
    }

    td:nth-child(4):before {
        content: 'คงเหลือ';
        font-size: 0.75rem;
        color: var(--text-muted);
        margin-bottom: 2px;
    }

    td:nth-child(5) {
        /* จุดสั่งซื้อ */
        grid-column: 2;
        border: none;
        padding: 8px 0;
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        text-align: right;
    }

    td:nth-child(5):before {
        content: 'จุดสั่งซื้อ';
        font-size: 0.75rem;
        color: var(--text-muted);
        margin-bottom: 2px;
    }

    /* Row 3: Actions - full width */
    td:nth-child(6) {
        /* จัดการ */
        grid-column: 1 / -1;
        display: flex;
        justify-content: center;
        gap: 8px;
        padding-top: 8px;
        border-top: 1px solid #f1f5f9;
    }

    td:nth-child(6):before {
        display: none;
    }

    .product-info {
        flex-direction: row;
        align-items: center;
        gap: 12px;
    }

    .product-info img {
        width: 50px;
        height: 50px;
        object-fit: cover;
        border-radius: 8px;
    }

    .product-name {
        font-size: 1rem;
        font-weight: 600;
    }

    .product-spec {
        font-size: 0.8rem;
    }

    .stock-badge {
        font-size: 1.1rem;
        padding: 4px 8px;
    }

    .btn.icon {
        padding: 8px 10px;
    }

    /* --- NAV BAR ADJUSTMENT (Red Box Area) --- */
    /* Target common nav structures or specific class if known */
    .tabs-nav,
    .nav-menu,
    .top-nav-bar {
        display: grid !important;
        grid-template-columns: 1fr 1fr !important;
        gap: 10px !important;
        white-space: normal !important;
    }

    .tabs-nav a,
    .tabs-nav button,
    .nav-item {
        width: 100% !important;
        justify-content: center !important;
        text-align: center !important;
        border-radius: 8px !important;
        margin-bottom: 0 !important;
    }

    /* --- 6. Modal Mobile Fixes --- */
    .modal-overlay {
        padding: 10px;
        align-items: flex-start;
    }

    .modal-content {
        width: 100% !important;
        max-width: 100% !important;
        max-height: 90vh;
        margin: 0;
        border-radius: 12px;
        display: flex;
        flex-direction: column;
        overflow: hidden;
    }

    .modal-header {
        padding: 12px 16px;
        flex-shrink: 0;
    }

    .modal-header h2 {
        font-size: 1.1rem;
    }

    .modal-body,
    #item-form,
    #trans-form {
        overflow-y: auto;
        flex: 1;
        padding: 12px 16px;
        max-height: calc(90vh - 140px);
    }

    .form-group {
        margin-bottom: 12px;
    }

    .form-group label {
        font-size: 0.85rem;
        margin-bottom: 4px;
    }

    .form-group input,
    .form-group select {
        padding: 10px 12px;
        font-size: 1rem;
    }

    .form-row {
        flex-direction: column;
        gap: 12px;
    }

    .form-row .form-group {
        width: 100%;
    }

    /* Modal Actions - Fixed at bottom */
    .modal-actions {
        flex-shrink: 0;
        padding: 12px 16px;
        background: #f8fafc;
        border-top: 1px solid #e2e8f0;
        gap: 10px;
        position: sticky;
        bottom: 0;
    }

    .modal-actions button {
        flex: 1;
        padding: 12px;
        font-size: 0.95rem;
    }

    /* Image preview smaller on mobile */
    #image-preview {
        max-height: 100px !important;
    }

    /* Detail modal compact */
    #detail-modal .modal-body {
        padding: 16px;
    }

    #detail-modal img {
        max-height: 150px !important;
    }

    #detail-modal h3 {
        font-size: 1.2rem !important;
    }

    /* Transaction modal compact */
    .trans-content {
        max-width: 100% !important;
    }

    .item-summary-badge {
        font-size: 0.9rem;
        padding: 10px;
        margin-bottom: 12px;
    }

    .large-input {
        font-size: 1.2rem !important;
        padding: 12px !important;
    }

    /* History modal */
    #history-modal .modal-content {
        max-width: 100% !important;
    }

    .history-container {
        max-height: 50vh;
        overflow-y: auto;
    }

    .history-table {
        font-size: 0.85rem;
    }

    .history-table th,
    .history-table td {
        padding: 8px 6px;
    }
}